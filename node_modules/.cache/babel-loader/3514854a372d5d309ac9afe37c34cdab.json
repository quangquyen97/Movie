{"ast":null,"code":"import _slicedToArray from\"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{DatePicker,Form,Input,InputNumber,Radio,Switch}from\"antd\";import{useFormik}from\"formik\";import React,{useState}from\"react\";import moment from\"moment\";import{useDispatch}from\"react-redux\";import{themPhimUploadHinhAction}from\"../../../../redux/actions/QuanLyPhimAction\";import{GROUPID}from\"../../../../ulti/setting\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddNew=function AddNew(){var _useState=useState(\"default\"),_useState2=_slicedToArray(_useState,2),componentSize=_useState2[0],setComponentSize=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),imgSrc=_useState4[0],setImgSrc=_useState4[1];var dispatch=useDispatch();var formik=useFormik({initialValues:{tenPhim:\"\",trailer:\"\",moTa:\"\",ngayKhoiChieu:\"\",dangChieu:false,sapChieu:false,hot:false,danhGia:0,hinhAnh:{},maNhom:GROUPID},onSubmit:function onSubmit(values){values.maNhom=GROUPID;var formData=new FormData();for(var key in values){if(key!==\"hinhAnh\"){formData.append(key,values[key]);}else{formData.append(\"File\",values.hinhAnh,values.hinhAnh.name);}}dispatch(themPhimUploadHinhAction(formData));}});var handleChangeDatePicker=function handleChangeDatePicker(value){var ngayKhoiChieu=moment(value).format(\"DD/MM/YYYY\");formik.setFieldValue(\"ngayKhoiChieu\",ngayKhoiChieu);};var handleChangeSwitch=function handleChangeSwitch(name){return function(value){formik.setFieldValue(name,value);};};var handleChangeInputNumber=function handleChangeInputNumber(name){return function(value){formik.setFieldValue(name,value);};};var handleChangeFile=function handleChangeFile(e){var file=e.target.files[0];if(file.type===\"image/jpeg\"||file.type===\"image/jpg\"||file.type===\"image/gif\"||file.type===\"image/png\"){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(e){setImgSrc(e.target.result);};formik.setFieldValue(\"hinhAnh\",file);}};var onFormLayoutChange=function onFormLayoutChange(_ref){var size=_ref.size;setComponentSize(size);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Form,{onSubmitCapture:formik.handleSubmit,labelCol:{span:4},wrapperCol:{span:14},layout:\"horizontal\",initialValues:{size:componentSize},onValuesChange:onFormLayoutChange,size:componentSize,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Th\\xEAm m\\u1EDBi phim\"}),/*#__PURE__*/_jsx(Form.Item,{label:\"Form Size\",name:\"size\",children:/*#__PURE__*/_jsxs(Radio.Group,{children:[/*#__PURE__*/_jsx(Radio.Button,{value:\"small\",children:\"Small\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"default\",children:\"Default\"}),/*#__PURE__*/_jsx(Radio.Button,{value:\"large\",children:\"Large\"})]})}),/*#__PURE__*/_jsx(Form.Item,{label:\"T\\xEAn phim\",children:/*#__PURE__*/_jsx(Input,{name:\"tenPhim\",onChange:formik.handleChange})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Trailer\",children:/*#__PURE__*/_jsx(Input,{name:\"trailer\",onChange:formik.handleChange})}),/*#__PURE__*/_jsx(Form.Item,{label:\"M\\xF4 t\\u1EA3\",children:/*#__PURE__*/_jsx(Input,{name:\"moTa\",onChange:formik.handleChange})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y kh\\u1EDFi chi\\u1EBFu\",children:/*#__PURE__*/_jsx(DatePicker,{format:\"DD/MM/YYYY\",onChange:handleChangeDatePicker})}),/*#__PURE__*/_jsx(Form.Item,{label:\"\\u0110ang chi\\u1EBFu\",valuePropName:\"checked\",children:/*#__PURE__*/_jsx(Switch,{onChange:handleChangeSwitch(\"dangChieu\")})}),/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1EAFp chi\\u1EBFu\",valuePropName:\"checked\",children:/*#__PURE__*/_jsx(Switch,{onChange:handleChangeSwitch(\"sapChieu\")})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Hot\",valuePropName:\"checked\",children:/*#__PURE__*/_jsx(Switch,{onChange:handleChangeSwitch(\"hot\")})}),/*#__PURE__*/_jsx(Form.Item,{label:\"S\\u1ED1 sao\",children:/*#__PURE__*/_jsx(InputNumber,{onChange:handleChangeInputNumber(\"danhGia\"),min:1,max:10})}),/*#__PURE__*/_jsxs(Form.Item,{label:\"H\\xECnh \\u1EA3nh\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChangeFile,accept:\"image/png , image/jpeg , image/gif , image/png\"}),/*#__PURE__*/_jsx(\"img\",{style:{width:150,height:150},src:imgSrc,alt:\"...\"})]}),/*#__PURE__*/_jsx(Form.Item,{label:\"T\\xE1c v\\u1EE5\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-300 text-white p-2\",children:\"Th\\xEAm phim\"})})]})});};export default AddNew;","map":{"version":3,"names":["DatePicker","Form","Input","InputNumber","Radio","Switch","useFormik","React","useState","moment","useDispatch","themPhimUploadHinhAction","GROUPID","AddNew","componentSize","setComponentSize","imgSrc","setImgSrc","dispatch","formik","initialValues","tenPhim","trailer","moTa","ngayKhoiChieu","dangChieu","sapChieu","hot","danhGia","hinhAnh","maNhom","onSubmit","values","formData","FormData","key","append","name","handleChangeDatePicker","value","format","setFieldValue","handleChangeSwitch","handleChangeInputNumber","handleChangeFile","e","file","target","files","type","reader","FileReader","readAsDataURL","onload","result","onFormLayoutChange","size","handleSubmit","span","handleChange","width","height"],"sources":["/Users/quangquyen/Documents/TƯƠNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/src/pages/Admin/Films/AddNew/AddNew.js"],"sourcesContent":["import {\n  DatePicker,\n  Form,\n  Input,\n  InputNumber,\n  Radio,\n  Switch,\n} from \"antd\";\nimport { useFormik } from \"formik\";\nimport React, { useState } from \"react\";\nimport moment from \"moment\";\nimport { useDispatch } from \"react-redux\";\nimport { themPhimUploadHinhAction } from \"../../../../redux/actions/QuanLyPhimAction\";\nimport { GROUPID } from \"../../../../ulti/setting\";\n\nconst AddNew = () => {\n  const [componentSize, setComponentSize] = useState(\"default\");\n  const [imgSrc, setImgSrc] = useState(\"\");\n  const dispatch = useDispatch();\n\n  const formik = useFormik({\n    initialValues: {\n      tenPhim: \"\",\n      trailer: \"\",\n      moTa: \"\",\n      ngayKhoiChieu: \"\",\n      dangChieu: false,\n      sapChieu: false,\n      hot: false,\n      danhGia: 0,\n      hinhAnh: {},\n      maNhom: GROUPID,\n    },\n    onSubmit: (values) => {\n      values.maNhom = GROUPID;\n      let formData = new FormData();\n      for (let key in values) {\n        if (key !== \"hinhAnh\") {\n          formData.append(key, values[key]);\n        } else {\n          formData.append(\"File\", values.hinhAnh, values.hinhAnh.name);\n        }\n      }\n      dispatch(themPhimUploadHinhAction(formData));\n    },\n  });\n\n  const handleChangeDatePicker = (value) => {\n    let ngayKhoiChieu = moment(value).format(\"DD/MM/YYYY\");\n    formik.setFieldValue(\"ngayKhoiChieu\", ngayKhoiChieu);\n  };\n\n  const handleChangeSwitch = (name) => {\n    return (value) => {\n      formik.setFieldValue(name, value);\n    };\n  };\n\n  const handleChangeInputNumber = (name) => {\n    return (value) => {\n      formik.setFieldValue(name, value);\n    };\n  };\n\n  const handleChangeFile = (e) => {\n    let file = e.target.files[0];\n    if (\n      file.type === \"image/jpeg\" ||\n      file.type === \"image/jpg\" ||\n      file.type === \"image/gif\" ||\n      file.type === \"image/png\"\n    ) {\n      let reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = (e) => {\n        setImgSrc(e.target.result);\n      };\n      formik.setFieldValue(\"hinhAnh\", file);\n    }\n  };\n\n  const onFormLayoutChange = ({ size }) => {\n    setComponentSize(size);\n  };\n\n  return (\n    <>\n      <Form\n        onSubmitCapture={formik.handleSubmit}\n        labelCol={{\n          span: 4,\n        }}\n        wrapperCol={{\n          span: 14,\n        }}\n        layout=\"horizontal\"\n        initialValues={{\n          size: componentSize,\n        }}\n        onValuesChange={onFormLayoutChange}\n        size={componentSize}\n      >\n        <h3>Thêm mới phim</h3>\n        <Form.Item label=\"Form Size\" name=\"size\">\n          <Radio.Group>\n            <Radio.Button value=\"small\">Small</Radio.Button>\n            <Radio.Button value=\"default\">Default</Radio.Button>\n            <Radio.Button value=\"large\">Large</Radio.Button>\n          </Radio.Group>\n        </Form.Item>\n        <Form.Item label=\"Tên phim\">\n          <Input name=\"tenPhim\" onChange={formik.handleChange} />\n        </Form.Item>\n        <Form.Item label=\"Trailer\">\n          <Input name=\"trailer\" onChange={formik.handleChange} />\n        </Form.Item>\n        <Form.Item label=\"Mô tả\">\n          <Input name=\"moTa\" onChange={formik.handleChange} />\n        </Form.Item>\n        <Form.Item label=\"Ngày khởi chiếu\">\n          <DatePicker format={\"DD/MM/YYYY\"} onChange={handleChangeDatePicker} />\n        </Form.Item>\n        <Form.Item label=\"Đang chiếu\" valuePropName=\"checked\">\n          <Switch onChange={handleChangeSwitch(\"dangChieu\")} />\n        </Form.Item>\n        <Form.Item label=\"Sắp chiếu\" valuePropName=\"checked\">\n          <Switch onChange={handleChangeSwitch(\"sapChieu\")} />\n        </Form.Item>\n        <Form.Item label=\"Hot\" valuePropName=\"checked\">\n          <Switch onChange={handleChangeSwitch(\"hot\")} />\n        </Form.Item>\n\n        <Form.Item label=\"Số sao\">\n          <InputNumber\n            onChange={handleChangeInputNumber(\"danhGia\")}\n            min={1}\n            max={10}\n          />\n        </Form.Item>\n\n        <Form.Item label=\"Hình ảnh\">\n          <input\n            type=\"file\"\n            onChange={handleChangeFile}\n            accept=\"image/png , image/jpeg , image/gif , image/png\"\n          />\n\n          <img style={{ width: 150, height: 150 }} src={imgSrc} alt=\"...\" />\n        </Form.Item>\n        <Form.Item label=\"Tác vụ\">\n          <button type=\"submit\" className=\"bg-blue-300 text-white p-2\">\n            Thêm phim\n          </button>\n        </Form.Item>\n      </Form>\n    </>\n  );\n};\n\nexport default AddNew;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}