{"ast":null,"code":"var _jsxFileName = \"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/src/pages/Admin/Films/Showtime/ShowTime.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { InputNumber, Select } from 'antd';\nimport { Button, Checkbox, Form, Input, Cascader, DatePicker } from 'antd';\nimport { quanLyRapService } from '../../../../services/QuanLyRapService';\nimport { useFormik } from 'formik';\nimport moment from 'moment';\nimport { quanLyDatVeService } from '../../../../services/QuanLyDatVeService';\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ShowTime(props) {\n  _s();\n\n  var _state$cumRapChieu;\n\n  const formik = useFormik({\n    initialValues: {\n      maPhim: props.match.params.id,\n      ngayChieuGioChieu: '',\n      maRap: '',\n      giaVe: ''\n    },\n    onSubmit: async values => {\n      console.log('values', values);\n\n      try {\n        const result = await quanLyDatVeService.taoLichChieu(values);\n        swal(\"Tạo lịch chiếu thành công!\", \"\", \"success\");\n      } catch (error) {\n        console.log('error', error);\n      }\n    }\n  });\n  const [state, setState] = useState({\n    heThongRapChieu: [],\n    cumRapChieu: []\n  });\n  console.log(state.heThongRapChieu);\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        let result = await quanLyRapService.layThongTinHeThongRap();\n        setState({ ...state,\n          heThongRapChieu: result\n        });\n      } catch (error) {\n        console.log('error', error);\n      }\n    }\n\n    fetchData();\n  }, []);\n\n  const handleChangeHeThongRap = async value => {\n    //từ hệ thống rạp call api lấy thông tin rạp\n    try {\n      let result = await quanLyRapService.layThongTinCumRap(value); //Gán giá trị cụm rạp vào state.cumRap\n\n      setState({ ...state,\n        cumRapChieu: result\n      });\n    } catch (error) {\n      console.log('error', error);\n    }\n  };\n\n  const handleChangeCumRap = value => {\n    formik.setFieldValue('maRap', value);\n  };\n\n  const onOk = values => {\n    formik.setFieldValue('ngayChieuGioChieu', moment(values).format('DD/MM/YYYY hh:mm:ss')); // console.log('values', moment(values).format('DD/MM/YYYY hh:mm:ss') )\n  };\n\n  const onChangeDate = values => {\n    formik.setFieldValue('ngayChieuGioChieu', moment(values).format('DD/MM/YYYY hh:mm:ss')); // console.log('values', moment(values).format('DD/MM/YYYY hh:mm:ss') )\n  };\n\n  const onChangeInputNumber = value => {\n    formik.setFieldValue('giaVe', value);\n  };\n\n  const convertSelectHTR = () => {\n    var _state$heThongRapChie;\n\n    // state.heThongRapChieu?.map((htr,index)=> ({label:htr.tenHeThongRap,value:htr.tenHeThongRap}))\n    return (_state$heThongRapChie = state.heThongRapChieu) === null || _state$heThongRapChie === void 0 ? void 0 : _state$heThongRapChie.map((htr, index) => {\n      return {\n        label: htr.tenHeThongRap,\n        value: htr.maHeThongRap\n      };\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      name: \"basic\",\n      labelCol: {\n        span: 8\n      },\n      wrapperCol: {\n        span: 16\n      },\n      initialValues: {\n        remember: true\n      },\n      onSubmitCapture: formik.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-2xl\",\n        children: \"T\\u1EA1o l\\u1ECBch chi\\u1EBFu \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"H\\u1EC7 th\\u1ED1ng r\\u1EA1p\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: convertSelectHTR(),\n          onChange: handleChangeHeThongRap,\n          placeholder: \"Ch\\u1ECDn h\\u1EC7 th\\u1ED1ng r\\u1EA1p\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"C\\u1EE5m r\\u1EA1p\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: (_state$cumRapChieu = state.cumRapChieu) === null || _state$cumRapChieu === void 0 ? void 0 : _state$cumRapChieu.map((cumRap, index) => ({\n            label: cumRap.tenCumRap,\n            value: cumRap.maCumRap\n          })),\n          onChange: handleChangeCumRap,\n          placeholder: \"Ch\\u1ECDn c\\u1EE5m r\\u1EA1p\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Ng\\xE0y chi\\u1EBFu gi\\u1EDD chi\\u1EBFu\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          format: \"DD/MM/YYYY hh:mm:ss\",\n          showTime: true,\n          onChange: onChangeDate,\n          onOk: onOk\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Gi\\xE1 v\\xE9\",\n        children: /*#__PURE__*/_jsxDEV(InputNumber, {\n          defaultValue: 3,\n          onChange: onChangeInputNumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n        label: \"Ch\\u1EE9c n\\u0103ng\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          htmlType: \"submit\",\n          children: \"T\\u1EA1o l\\u1ECBch chi\\u1EBFu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ShowTime, \"eUb9bYzrXgEaIK6Y0GMCqRpgnc4=\", false, function () {\n  return [useFormik];\n});\n\n_c = ShowTime;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShowTime\");","map":{"version":3,"names":["React","useState","useEffect","InputNumber","Select","Button","Checkbox","Form","Input","Cascader","DatePicker","quanLyRapService","useFormik","moment","quanLyDatVeService","swal","ShowTime","props","formik","initialValues","maPhim","match","params","id","ngayChieuGioChieu","maRap","giaVe","onSubmit","values","console","log","result","taoLichChieu","error","state","setState","heThongRapChieu","cumRapChieu","fetchData","layThongTinHeThongRap","handleChangeHeThongRap","value","layThongTinCumRap","handleChangeCumRap","setFieldValue","onOk","format","onChangeDate","onChangeInputNumber","convertSelectHTR","map","htr","index","label","tenHeThongRap","maHeThongRap","span","remember","handleSubmit","cumRap","tenCumRap","maCumRap"],"sources":["/Users/quangquyen/Documents/TƯƠNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/src/pages/Admin/Films/Showtime/ShowTime.js"],"sourcesContent":["import React, { useState , useEffect } from 'react'\nimport { InputNumber, Select } from 'antd';\nimport { Button, Checkbox, Form, Input, Cascader , DatePicker } from 'antd';\nimport { quanLyRapService } from '../../../../services/QuanLyRapService';\nimport { useFormik } from 'formik';\nimport moment from 'moment';\nimport { quanLyDatVeService } from '../../../../services/QuanLyDatVeService';\nimport swal from 'sweetalert'; \n\n\n\nexport default function ShowTime(props) {\n\n    const formik = useFormik({\n        initialValues:{\n            maPhim:props.match.params.id,\n            ngayChieuGioChieu:'',\n            maRap:'',\n            giaVe:'',\n        },\n        onSubmit : async (values) => {\n            console.log('values', values)\n            try {\n                const result = await quanLyDatVeService.taoLichChieu(values);\n\n                swal(\"Tạo lịch chiếu thành công!\", \"\", \"success\");\n\n            }catch(error) {\n                console.log('error',error)\n            }\n        }\n    })\n\n    const [state,setState] = useState({\n        heThongRapChieu: [],\n        cumRapChieu:[]\n    })\n    console.log(state.heThongRapChieu)\n\n    useEffect( () => {\n        async function fetchData(){\n            try {\n                let result = await quanLyRapService.layThongTinHeThongRap();\n                setState({\n                    ...state,\n                    heThongRapChieu: result\n                })\n    \n            }catch(error){\n                console.log('error',error)\n            }\n        }\n        fetchData();\n    },[])\n\n    const handleChangeHeThongRap = async (value) => {\n       //từ hệ thống rạp call api lấy thông tin rạp\n       try {\n            let result = await quanLyRapService.layThongTinCumRap(value)\n            //Gán giá trị cụm rạp vào state.cumRap\n            setState({\n                ...state,\n                cumRapChieu:result\n            })\n\n       }catch(error) {\n         console.log('error',error);\n       }\n\n    }\n\n    const handleChangeCumRap = (value) => {\n        formik.setFieldValue('maRap',value)\n    }\n    \n    const onOk = (values) => {\n        formik.setFieldValue('ngayChieuGioChieu',moment(values).format('DD/MM/YYYY hh:mm:ss'))\n        // console.log('values', moment(values).format('DD/MM/YYYY hh:mm:ss') )\n    }\n\n    const onChangeDate = (values) => {\n\n        formik.setFieldValue('ngayChieuGioChieu',moment(values).format('DD/MM/YYYY hh:mm:ss'))\n        // console.log('values', moment(values).format('DD/MM/YYYY hh:mm:ss') )\n    }\n    const onChangeInputNumber = (value) => {\n       formik.setFieldValue('giaVe',value)\n    }\n    const convertSelectHTR = () => {\n        // state.heThongRapChieu?.map((htr,index)=> ({label:htr.tenHeThongRap,value:htr.tenHeThongRap}))\n        return state.heThongRapChieu?.map((htr,index) => {\n            return {label:htr.tenHeThongRap , value:htr.maHeThongRap}\n        })\n    }\n\n    return (\n        <div className=\"container\">\n            <Form\n                name=\"basic\"\n                labelCol={{span: 8,}}\n                wrapperCol={{span: 16,}}\n                initialValues={{remember: true,}}\n                onSubmitCapture = {formik.handleSubmit}\n                \n            >\n                <h3 className='text-2xl'>Tạo lịch chiếu </h3>\n\n                <Form.Item label=\"Hệ thống rạp\" >\n                    <Select options={convertSelectHTR()} onChange={handleChangeHeThongRap} placeholder=\"Chọn hệ thống rạp\"/>\n                </Form.Item>\n\n\n                <Form.Item label=\"Cụm rạp\" >\n                    <Select options={state.cumRapChieu?.map((cumRap,index)=>({label:cumRap.tenCumRap,value:cumRap.maCumRap}) )} onChange={handleChangeCumRap} placeholder=\"Chọn cụm rạp\"/>\n                </Form.Item>\n\n                <Form.Item label=\"Ngày chiếu giờ chiếu\" >\n                    <DatePicker format='DD/MM/YYYY hh:mm:ss' showTime onChange={onChangeDate} onOk={onOk} />\n                </Form.Item>\n\n                <Form.Item label=\"Giá vé\" >\n                    <InputNumber defaultValue={3} onChange={onChangeInputNumber} />\n                </Form.Item>\n                <Form.Item label=\"Chức năng\" >\n                   <Button htmlType='submit'>Tạo lịch chiếu</Button>\n                </Form.Item>\n\n\n            </Form>\n        </div>\n  )\n  \n  \n    \n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}