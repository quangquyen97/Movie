{"ast":null,"code":"import _objectSpread from\"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/quangquyen/Documents/TU\\u031BO\\u031BNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useState,useEffect}from\"react\";import{InputNumber,Select}from\"antd\";import{Button,Form,DatePicker}from\"antd\";import{quanLyRapService}from\"../../../../services/QuanLyRapService\";import{useFormik}from\"formik\";import moment from\"moment\";import{quanLyDatVeService}from\"../../../../services/QuanLyDatVeService\";import swal from\"sweetalert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ShowTime(props){var _state$cumRapChieu;var formik=useFormik({initialValues:{maPhim:props.match.params.id,ngayChieuGioChieu:\"\",maRap:\"\",giaVe:\"\"},onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return quanLyDatVeService.taoLichChieu(values);case 3:result=_context.sent;swal(\"Tạo lịch chiếu thành công!\",\"\",\"success\");_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);swal(_context.t0.content,\"\",\"error\");case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});var _useState=useState({heThongRapChieu:[],cumRapChieu:[]}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return quanLyRapService.layThongTinHeThongRap();case 3:result=_context2.sent;setState(_objectSpread(_objectSpread({},state),{},{heThongRapChieu:result}));_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);var handleChangeHeThongRap=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(value){var result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return quanLyRapService.layThongTinCumRap(value);case 3:result=_context3.sent;setState(_objectSpread(_objectSpread({},state),{},{cumRapChieu:result}));_context3.next=9;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function handleChangeHeThongRap(_x2){return _ref.apply(this,arguments);};}();var handleChangeCumRap=function handleChangeCumRap(value){formik.setFieldValue(\"maRap\",value);};var onOk=function onOk(values){formik.setFieldValue(\"ngayChieuGioChieu\",moment(values).format(\"DD/MM/YYYY hh:mm:ss\"));};var onChangeDate=function onChangeDate(values){formik.setFieldValue(\"ngayChieuGioChieu\",moment(values).format(\"DD/MM/YYYY hh:mm:ss\"));};var onChangeInputNumber=function onChangeInputNumber(value){formik.setFieldValue(\"giaVe\",value);};var convertSelectHTR=function convertSelectHTR(){var _state$heThongRapChie;return(_state$heThongRapChie=state.heThongRapChieu)===null||_state$heThongRapChie===void 0?void 0:_state$heThongRapChie.map(function(htr,index){return{label:htr.tenHeThongRap,value:htr.maHeThongRap};});};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Form,{name:\"basic\",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:true},onSubmitCapture:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl\",children:\"T\\u1EA1o l\\u1ECBch chi\\u1EBFu \"}),/*#__PURE__*/_jsx(Form.Item,{label:\"H\\u1EC7 th\\u1ED1ng r\\u1EA1p\",children:/*#__PURE__*/_jsx(Select,{options:convertSelectHTR(),onChange:handleChangeHeThongRap,placeholder:\"Ch\\u1ECDn h\\u1EC7 th\\u1ED1ng r\\u1EA1p\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"C\\u1EE5m r\\u1EA1p\",children:/*#__PURE__*/_jsx(Select,{options:(_state$cumRapChieu=state.cumRapChieu)===null||_state$cumRapChieu===void 0?void 0:_state$cumRapChieu.map(function(cumRap,index){return{label:cumRap.tenCumRap,value:cumRap.maCumRap};}),onChange:handleChangeCumRap,placeholder:\"Ch\\u1ECDn c\\u1EE5m r\\u1EA1p\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ng\\xE0y chi\\u1EBFu gi\\u1EDD chi\\u1EBFu\",children:/*#__PURE__*/_jsx(DatePicker,{format:\"DD/MM/YYYY hh:mm:ss\",showTime:true,onChange:onChangeDate,onOk:onOk})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Gi\\xE1 v\\xE9\",children:/*#__PURE__*/_jsx(InputNumber,{defaultValue:3,onChange:onChangeInputNumber})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Ch\\u1EE9c n\\u0103ng\",children:/*#__PURE__*/_jsx(Button,{htmlType:\"submit\",children:\"T\\u1EA1o l\\u1ECBch chi\\u1EBFu\"})})]})});}","map":{"version":3,"names":["React","useState","useEffect","InputNumber","Select","Button","Form","DatePicker","quanLyRapService","useFormik","moment","quanLyDatVeService","swal","ShowTime","props","formik","initialValues","maPhim","match","params","id","ngayChieuGioChieu","maRap","giaVe","onSubmit","values","taoLichChieu","result","content","heThongRapChieu","cumRapChieu","state","setState","fetchData","layThongTinHeThongRap","handleChangeHeThongRap","value","layThongTinCumRap","handleChangeCumRap","setFieldValue","onOk","format","onChangeDate","onChangeInputNumber","convertSelectHTR","map","htr","index","label","tenHeThongRap","maHeThongRap","span","remember","handleSubmit","cumRap","tenCumRap","maCumRap"],"sources":["/Users/quangquyen/Documents/TƯƠNG LAI/ReactProjectDN03/BCDN03_MOVIE_REACTJS-2/src/pages/Admin/Films/Showtime/ShowTime.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { InputNumber, Select } from \"antd\";\nimport { Button, Form, DatePicker } from \"antd\";\nimport { quanLyRapService } from \"../../../../services/QuanLyRapService\";\nimport { useFormik } from \"formik\";\nimport moment from \"moment\";\nimport { quanLyDatVeService } from \"../../../../services/QuanLyDatVeService\";\nimport swal from \"sweetalert\";\n\nexport default function ShowTime(props) {\n  const formik = useFormik({\n    initialValues: {\n      maPhim: props.match.params.id,\n      ngayChieuGioChieu: \"\",\n      maRap: \"\",\n      giaVe: \"\",\n    },\n    onSubmit: async (values) => {\n      try {\n        const result = await quanLyDatVeService.taoLichChieu(values);\n\n        swal(\"Tạo lịch chiếu thành công!\", \"\", \"success\");\n      } catch (error) {\n        swal(error.content, \"\", \"error\");\n      }\n    },\n  });\n\n  const [state, setState] = useState({\n    heThongRapChieu: [],\n    cumRapChieu: [],\n  });\n\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        let result = await quanLyRapService.layThongTinHeThongRap();\n        setState({\n          ...state,\n          heThongRapChieu: result,\n        });\n      } catch (error) {}\n    }\n    fetchData();\n  }, []);\n\n  const handleChangeHeThongRap = async (value) => {\n    try {\n      let result = await quanLyRapService.layThongTinCumRap(value);\n      setState({\n        ...state,\n        cumRapChieu: result,\n      });\n    } catch (error) {}\n  };\n\n  const handleChangeCumRap = (value) => {\n    formik.setFieldValue(\"maRap\", value);\n  };\n\n  const onOk = (values) => {\n    formik.setFieldValue(\n      \"ngayChieuGioChieu\",\n      moment(values).format(\"DD/MM/YYYY hh:mm:ss\")\n    );\n  };\n\n  const onChangeDate = (values) => {\n    formik.setFieldValue(\n      \"ngayChieuGioChieu\",\n      moment(values).format(\"DD/MM/YYYY hh:mm:ss\")\n    );\n  };\n  const onChangeInputNumber = (value) => {\n    formik.setFieldValue(\"giaVe\", value);\n  };\n  const convertSelectHTR = () => {\n    return state.heThongRapChieu?.map((htr, index) => {\n      return { label: htr.tenHeThongRap, value: htr.maHeThongRap };\n    });\n  };\n\n  return (\n    <div className=\"container\">\n      <Form\n        name=\"basic\"\n        labelCol={{ span: 8 }}\n        wrapperCol={{ span: 16 }}\n        initialValues={{ remember: true }}\n        onSubmitCapture={formik.handleSubmit}\n      >\n        <h3 className=\"text-2xl\">Tạo lịch chiếu </h3>\n\n        <Form.Item label=\"Hệ thống rạp\">\n          <Select\n            options={convertSelectHTR()}\n            onChange={handleChangeHeThongRap}\n            placeholder=\"Chọn hệ thống rạp\"\n          />\n        </Form.Item>\n\n        <Form.Item label=\"Cụm rạp\">\n          <Select\n            options={state.cumRapChieu?.map((cumRap, index) => ({\n              label: cumRap.tenCumRap,\n              value: cumRap.maCumRap,\n            }))}\n            onChange={handleChangeCumRap}\n            placeholder=\"Chọn cụm rạp\"\n          />\n        </Form.Item>\n\n        <Form.Item label=\"Ngày chiếu giờ chiếu\">\n          <DatePicker\n            format=\"DD/MM/YYYY hh:mm:ss\"\n            showTime\n            onChange={onChangeDate}\n            onOk={onOk}\n          />\n        </Form.Item>\n\n        <Form.Item label=\"Giá vé\">\n          <InputNumber defaultValue={3} onChange={onChangeInputNumber} />\n        </Form.Item>\n        <Form.Item label=\"Chức năng\">\n          <Button htmlType=\"submit\">Tạo lịch chiếu</Button>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n}\n"],"mappings":"2sBAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,MAAtB,KAAoC,MAApC,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,UAAvB,KAAyC,MAAzC,CACA,OAASC,gBAAT,KAAiC,uCAAjC,CACA,OAASC,SAAT,KAA0B,QAA1B,CACA,MAAOC,OAAP,KAAmB,QAAnB,CACA,OAASC,kBAAT,KAAmC,yCAAnC,CACA,MAAOC,KAAP,KAAiB,YAAjB,C,wFAEA,cAAe,SAASC,SAAT,CAAkBC,KAAlB,CAAyB,wBACtC,GAAMC,OAAM,CAAGN,SAAS,CAAC,CACvBO,aAAa,CAAE,CACbC,MAAM,CAAEH,KAAK,CAACI,KAAN,CAAYC,MAAZ,CAAmBC,EADd,CAEbC,iBAAiB,CAAE,EAFN,CAGbC,KAAK,CAAE,EAHM,CAIbC,KAAK,CAAE,EAJM,CADQ,CAOvBC,QAAQ,oFAAE,iBAAOC,MAAP,qKAEed,mBAAkB,CAACe,YAAnB,CAAgCD,MAAhC,CAFf,QAEAE,MAFA,eAINf,IAAI,CAAC,4BAAD,CAA+B,EAA/B,CAAmC,SAAnC,CAAJ,CAJM,+EAMNA,IAAI,CAAC,YAAMgB,OAAP,CAAgB,EAAhB,CAAoB,OAApB,CAAJ,CANM,oEAAF,oFAPe,CAAD,CAAxB,CAkBA,cAA0B3B,QAAQ,CAAC,CACjC4B,eAAe,CAAE,EADgB,CAEjCC,WAAW,CAAE,EAFoB,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eAKA9B,SAAS,CAAC,UAAM,SACC+B,UADD,uIACd,6LAEuBzB,iBAAgB,CAAC0B,qBAAjB,EAFvB,QAEQP,MAFR,gBAGIK,QAAQ,gCACHD,KADG,MAENF,eAAe,CAAEF,MAFX,GAAR,CAHJ,uJADc,4CAUdM,SAAS,GACV,CAXQ,CAWN,EAXM,CAAT,CAaA,GAAME,uBAAsB,4FAAG,kBAAOC,KAAP,2KAER5B,iBAAgB,CAAC6B,iBAAjB,CAAmCD,KAAnC,CAFQ,QAEvBT,MAFuB,gBAG3BK,QAAQ,gCACHD,KADG,MAEND,WAAW,CAAEH,MAFP,GAAR,CAH2B,uJAAH,kBAAtBQ,uBAAsB,6CAA5B,CAUA,GAAMG,mBAAkB,CAAG,QAArBA,mBAAqB,CAACF,KAAD,CAAW,CACpCrB,MAAM,CAACwB,aAAP,CAAqB,OAArB,CAA8BH,KAA9B,EACD,CAFD,CAIA,GAAMI,KAAI,CAAG,QAAPA,KAAO,CAACf,MAAD,CAAY,CACvBV,MAAM,CAACwB,aAAP,CACE,mBADF,CAEE7B,MAAM,CAACe,MAAD,CAAN,CAAegB,MAAf,CAAsB,qBAAtB,CAFF,EAID,CALD,CAOA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACjB,MAAD,CAAY,CAC/BV,MAAM,CAACwB,aAAP,CACE,mBADF,CAEE7B,MAAM,CAACe,MAAD,CAAN,CAAegB,MAAf,CAAsB,qBAAtB,CAFF,EAID,CALD,CAMA,GAAME,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACP,KAAD,CAAW,CACrCrB,MAAM,CAACwB,aAAP,CAAqB,OAArB,CAA8BH,KAA9B,EACD,CAFD,CAGA,GAAMQ,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,2BAC7B,6BAAOb,KAAK,CAACF,eAAb,gDAAO,sBAAuBgB,GAAvB,CAA2B,SAACC,GAAD,CAAMC,KAAN,CAAgB,CAChD,MAAO,CAAEC,KAAK,CAAEF,GAAG,CAACG,aAAb,CAA4Bb,KAAK,CAAEU,GAAG,CAACI,YAAvC,CAAP,CACD,CAFM,CAAP,CAGD,CAJD,CAMA,mBACE,YAAK,SAAS,CAAC,WAAf,uBACE,MAAC,IAAD,EACE,IAAI,CAAC,OADP,CAEE,QAAQ,CAAE,CAAEC,IAAI,CAAE,CAAR,CAFZ,CAGE,UAAU,CAAE,CAAEA,IAAI,CAAE,EAAR,CAHd,CAIE,aAAa,CAAE,CAAEC,QAAQ,CAAE,IAAZ,CAJjB,CAKE,eAAe,CAAErC,MAAM,CAACsC,YAL1B,wBAOE,WAAI,SAAS,CAAC,UAAd,4CAPF,cASE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAC,6BAAjB,uBACE,KAAC,MAAD,EACE,OAAO,CAAET,gBAAgB,EAD3B,CAEE,QAAQ,CAAET,sBAFZ,CAGE,WAAW,CAAC,uCAHd,EADF,EATF,cAiBE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAC,mBAAjB,uBACE,KAAC,MAAD,EACE,OAAO,qBAAEJ,KAAK,CAACD,WAAR,6CAAE,mBAAmBe,GAAnB,CAAuB,SAACS,MAAD,CAASP,KAAT,QAAoB,CAClDC,KAAK,CAAEM,MAAM,CAACC,SADoC,CAElDnB,KAAK,CAAEkB,MAAM,CAACE,QAFoC,CAApB,EAAvB,CADX,CAKE,QAAQ,CAAElB,kBALZ,CAME,WAAW,CAAC,6BANd,EADF,EAjBF,cA4BE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAC,wCAAjB,uBACE,KAAC,UAAD,EACE,MAAM,CAAC,qBADT,CAEE,QAAQ,KAFV,CAGE,QAAQ,CAAEI,YAHZ,CAIE,IAAI,CAAEF,IAJR,EADF,EA5BF,cAqCE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAC,cAAjB,uBACE,KAAC,WAAD,EAAa,YAAY,CAAE,CAA3B,CAA8B,QAAQ,CAAEG,mBAAxC,EADF,EArCF,cAwCE,KAAC,IAAD,CAAM,IAAN,EAAW,KAAK,CAAC,qBAAjB,uBACE,KAAC,MAAD,EAAQ,QAAQ,CAAC,QAAjB,2CADF,EAxCF,GADF,EADF,CAgDD"},"metadata":{},"sourceType":"module"}